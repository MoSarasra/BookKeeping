<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Customer</title>

    <!--CSS Link-->
    <link rel="stylesheet" href="../style/style.css">
    <!-- Boxicons CSS -->
    <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>

</head>
<body>
    <!--Header Start-->
    <header class="header" id="header">
        <div class="container">
            <!--logo-->
            <div class="logo">
               <a href="index.html">
                    <img src="../pics/logo3.png" alt="logo-Bookkeeping-app">
               </a>
            </div>

            <!--Navbar-->
            <nav class="navbar">
                <ul class="nav-list">
                    <li>
                        <a href="login.html"><i class='bx bx-log-in'></i>login</a>
                    </li>

                    <li>
                        <a href="login.html"><i class='bx bx-user-circle'></i>sign up</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <!--/.Header End-->


    <!--Page Content Start-->
    <main class="all-customer">
        <div class="all-customer-title">
            <h1>All Customers</h1>
        </div>

        <form id="book-form" class="book-form" autocomplete="off">
              <input type="text" id="id" placeholder="Enter Customer Id">
              <input type="text" id="name" placeholder="Enter Customer Name">
              <input type="text" id="credits" placeholder="Enter Customer Cre">
              <input type="submit" value="Submit" class="add-btn">
          </form>

        <div class="all-customer-table">
            <table class="table table-striped mt-5">
                <thead>
                  <tr>
                    <th>id</th>
                    <th>name</th>
                    <th> credits</th>
                    <th colspan="2">Buttons Actions</th>
                  </tr>
                </thead>
                <tbody id="book-list">
                  <tr><td>1</td>
                  <td>Mariana</td>
                  <td>12345</td>
                  <td><a href="#" class="btn btn-success btn-sm edit">Edit</a></td>
                  <td><a href="#" class="btn btn-danger btn-sm delete">X</a></td></tr>
                </tbody>
              </table>
        </div>
    </main>
    <!--/.Page Content End-->

    <footer class="footer">
        <p>@Copyright By Hyper-Text 2022</p>
    </footer>

    <script>
let selectedRow = null;
class Book {
constructor(id, credits, name) {
this.id = id;
this.credits = credits;
this.name = name;
}
}

class UI {
static addBookToList(book) {
const list = document.querySelector('#book-list');

const row = document.createElement('tr');

row.innerHTML = `
  <td>${book.id}</td>
  <td>${book.name}</td>
  <td>${book.credits}</td>
  <td><a href="#" class="btn btn-success btn-sm edit">Edit</a></td>
  <td><a href="#" class="btn btn-danger btn-sm delete">X</a></td>
`;

list.appendChild(row);
}
static editBookToList(book) {
selectedRow.children[0].textContent = book.id;
selectedRow.children[2].textContent = book.name;
selectedRow.children[1].textContent = book.credits;
}
static deleteBook(el) {
if(el.classList.contains('delete')) {
  el.parentElement.parentElement.remove();
  UI.showAlert('Employee Deleted', 'danger');
}
}
static editBook(el) {

if(el.classList.contains('edit')) {
  selectedRow = el.parentElement.parentElement;
  document.querySelector('#id').value = selectedRow.children[0].textContent;
  document.querySelector('#credits').value = selectedRow.children[1].textContent;
  document.querySelector('#name').value = selectedRow.children[2].textContent;
} else null

}

static showAlert(message, className) {
const div = document.createElement('div');
div.className = `alert alert-${className}`;

div.appendChild(document.createTextNode(message));
const container = document.querySelector('.container');
const main = document.querySelector('.main');
container.insertBefore(div, main);
setTimeout(() => document.querySelector('.alert').remove(), 3000);
}

static clearFields() {
document.querySelector('#id').value = '';
document.querySelector('#credits').value = '';
document.querySelector('#name').value = '';
}
}


document.addEventListener('DOMContentLoaded',UI.displayBooks);

document.querySelector('#book-form').addEventListener('submit', (e) => {
e.preventDefault();


const id = document.querySelector('#id').value;
const credits = document.querySelector('#credits').value;
const name = document.querySelector('#name').value;


if(id === '' || credits === '' || name === '') {
UI.showAlert('Please fill in all fields', 'danger');
} else {
const book = new Book(id, credits, name);
if (selectedRow == null) {
UI.addBookToList(book);
selectedRow = null;
UI.showAlert('Employee Added', 'success');
} else {
UI.editBookToList(book);
selectedRow = null;
UI.showAlert('Employee Info Edited', 'info');
}

UI.clearFields();
}
});

document.querySelector('#book-list').addEventListener('click', (e) => {
UI.deleteBook(e.target);
UI.editBook(e.target);

});
    </script>
</body>
</html>